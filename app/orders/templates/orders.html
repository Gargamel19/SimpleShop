{% extends "base.html" %}

{% block content %}

<link rel= "stylesheet" type= "text/css" href= "{{ url_for('orders.static',filename='styles/orders.css') }}">

<div class="columns is-8 is-multiline">
    {% for order in orders %}
        <div class="column is-full">
            <div class="card product_container">
                <div class="card-content">
                    <div class="media-content">
                        {% if order.type == 0 %}
                        <p class="title is-4 has-text-dark">â†™ï¸ {{order.public_id}}</p>
                        <p> ğŸš¢: {{order.supplier.title}}</p>
                        <p> total costs: -{{order.total_costs}}â‚¬ ğŸ“‰
                        <p> total amount: {{order.total_amount}} ğŸ“ˆ
                        {% else %}
                        <p class="title is-4 has-text-dark">â†—ï¸ {{order.public_id}}</p>
                        <p> ğŸ§: {{order.customer}}</p>
                        <p> total costs: +{{order.total_costs}}â‚¬ ğŸ“ˆ
                        <p> total amount: {{order.total_amount}} ğŸ“‰
                        {% endif %}

                        <nav class="panel">
                            <p class="panel-heading">Positions</p>
                            {% for pos in order.pos%}
                                <div class="panel-block is-active">
                                    <a href="{{ url_for('orders.delete_pos', public_id=order.public_id, pos_id=pos.public_id) }}" class="delete"></a> <div style="width:1rem"></div> <div class="name">{{pos.amount}}*{{pos.product.title}}: {{pos.costs}}â‚¬</div>
                                </div>
                                
                            {% endfor %}
                            <a href="{{ url_for('orders.create_pos', public_id=order.public_id) }}" class="panel-block is-active">
                                <span class="panel-icon">
                                â•
                            </a>
                        </nav>
                        
                    </div>
                </div>
                <footer class="card-footer">
                    {% if order.type == 0 %}
                        <a href="{{ url_for('orders.edit_supp', public_id=order.public_id) }}" class="card-footer-item">ğŸ–Šï¸</a>
                    {% elif order.type == 1 %}
                        <a href="{{ url_for('orders.edit_cust', public_id=order.public_id) }}" class="card-footer-item">ğŸ–Šï¸</a>
                    {% endif %}
                    <a href="{{ url_for('orders.delete', public_id=order.public_id) }}" class="card-footer-item">ğŸ—‘ï¸</a>
                </footer>
            </div>
        </div>
    {% endfor %}
    <div class="column is-full">
        <div class="card product_container">
            <div class="card-content">
                <div class="media-content">
                    <p class="title is-4 has-text-dark">CREATE NEW ORDER</p>
                </div>
            </div>
            <footer class="card-footer">
                <a href="{{ url_for('orders.create_supp') }}" class="card-footer-item">â• Supply Order</a>
                <a href="{{ url_for('orders.create_cust') }}" class="card-footer-item">â• Customer Order</a>
            </footer>
        </div>
    </div>
</div>

{% endblock %}